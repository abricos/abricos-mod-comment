<!--[*]
[script]brick/tree.php[/script]
[mcss=comment]comment.css[/mcss]

[p=module][/p]
[p=type][/p]
[p=ownerid][/p]
[p=readonly]true[/p]

[v=item]
<div data-id="{v#id}" class="comment">
    <div class="info">
        <a href="{v#userURI}" class="avatar pull-left">
            <img class="img-rounded" src="{v#userAvatar}"/>
        </a>

        <a href="{v#userURI}" class="viewName pull-left">{v#userName}</a>

        <div class="date pull-left">{v#date}</div>

        <div class="clearfix"></div>
    </div>

    <div class="commentBody">
        <div class="text commentBodyData" data-id="{v#id}">{v#body}</div>
    </div>

    {v#list}
</div>
[/v]

[v=writeScript]
    <div id="{v#brickid}-widget" class="aw-comment commentTree hide"></div>
    <script>
            Brick.use('comment', 'tree', function(err, NS){
                var Y = Brick.YUI;

                new NS.CommentTreeWidget({
                    boundingBox: Y.one('#{v#brickid}-widget'),
                    srcBodyData: Y.one('#{v#brickid}'),
                    readOnly: false,
                    commentOwner: {
                        module: '{v#ownerModule}',
                        type: '{v#ownerType}',
                        ownerid: '{v#ownerid}' | 0
                    },
                    onInitCallback: function(err){
                        if (err){
                            return;
                        }
                        Y.one('#{v#brickid}-widget').removeClass('hide');
                        Y.one('#{v#brickid}').remove();
                    }
                });
            });
    </script>
[/v]

[*]-->
<div id="{v#brickid}" class="aw-comment commentTree">
    <h3>Комментарии (<span>{v#count}</span>)</h3>
    {v#tree}
</div>

{v#writeScript}